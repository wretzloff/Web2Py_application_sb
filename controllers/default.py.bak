import httpFunctions
import webbrowser
import time
# cd ..
# cd ..
# cd var
# cd log
# > wretzloff.pythonanywhere.com.server.log


def index():
    arrayOfUrlsFromAllChannels = []
    
    #Send HTTP GET to root address and get the HTML back
    initialHTML = getHTMLString('http://toolbartv.swagbucks.com/?tb=1')
    initialHTML = tempGetInitialHTML()
    
    #Use the root address to get a list of all the "channels"
    arrayOfChannelUrls = getListOfChannels(initialHTML)
    #for channelUrl in arrayOfChannelUrls:
    #        print 'arrayOfChannelUrls: ' + channelUrl
    
    #Pass in the URL of each "channel" to receive back an array of URLs harvested from
    #that channel. Then add those channels to the master list.
    for channelUrl in arrayOfChannelUrls:
        arrayOfUrlsFromThisChannel = getUrlsFromChannel(channelUrl)
        for url in arrayOfUrlsFromThisChannel:
            arrayOfUrlsFromAllChannels.append(url)

    #webbrowser.open('yahoo.com')
    return dict(arrayOfUrls = arrayOfUrlsFromAllChannels)

def getUrlsFromChannel(channelUrl):
    #Send an HTTP GET to the channel URL to receive the HTML for that channel
    htmlForChannel = getHTMLString(channelUrl)
    #Scrape the HTML to get ahold of the <div id="feed-ajax-div"> DIV:
    feedAjaxDiv = getfeedAjaxDivHTML(htmlForChannel)
    #Extract the the ajax address from the Div 
    ajaxAddress = getAjaxAddressFromFeedAjaxDivHTML(feedAjaxDiv)
    #Modify the ajax address to pull back more than just 4 results.
    modifiedAjaxAddress = modifyAjaxNumberOfItemsRequested(ajaxAddress)
    #--------------------------------------------------
    #Up to this point, we have produced a URL which we can send an HTTP
    #GET to in order to obtain some HTML containing many video URLs.
    #htmlContainingUrls = getHTMLString(modifiedAjaxAddress)
    htmlContainingUrls = tempGetHtmlContainingUrls()
    #Pass in the resulting HTML and receive back an array of Urls.
    arrayOfUrlsFromThisChannel = extractUrlsFromHtml(htmlContainingUrls)
    
    return arrayOfUrlsFromThisChannel

def getListOfChannels(rootUrl):
    returnArray = []
    
    #The urls that we are looking for are within the div: <div id="menuChans">
    #<div id="menuChans">
    #    <ul>
	#		<li>
	#			<a href="http://toolbartv.swagbucks.com/feed/styleetc/239"></a>
	#		</li>
    #    </ul>
    #</div>
    #Advance the cursor to the first character in the Div.
    #If we find one, continue, else exit
    currentIndex = rootUrl.find('<div id="menuChans">')
    if currentIndex == -1:
        return returnArray

    #Advance the cursor to the index of the first character in the first <li> element.
    currentIndex = rootUrl.find('<li>', currentIndex)
    while currentIndex != -1:
        #Find the index just after the next quotation mark.
        #This is the first character in the channel Url.
        beginningIndexOfChannelUrl = rootUrl.find('"', currentIndex) + 1
        #Find the last character in the channel Url.
        endingIndexOfChannelUrl = rootUrl.find('"', beginningIndexOfChannelUrl)
        returnArray.append(rootUrl[beginningIndexOfChannelUrl:endingIndexOfChannelUrl])
        
        #Advance the cursor to the next <li> element.
        currentIndex = endingIndexOfChannelUrl
        currentIndex = rootUrl.find('<li>', currentIndex)
    return returnArray

def extractUrlsFromHtml(htmlContainingUrls):
    returnArray = []
    
    #The urls that we are looking for can be found by looking for 
    #the string: <a class="thumb-img-link" href="
    urlMarker = '<a class="thumb-img-link" href="'
    
    #Loop over the html string, find the beginning and ending of a url, add
    #the url to the array, and then move on to the next url.
    currentIndex = 0
    currentIndex = htmlContainingUrls.find(urlMarker, currentIndex)
    while(currentIndex != -1):
        #The URL itself starts at the index immediately after the ending of the marker.
        beginningIndexOfUrl = currentIndex + len(urlMarker)
        endingIndexOfUrl = htmlContainingUrls.find('"', beginningIndexOfUrl)
        returnArray.append(htmlContainingUrls[beginningIndexOfUrl : endingIndexOfUrl])
        #Find the index of the beginning of the next marker.
        currentIndex = htmlContainingUrls.find(urlMarker, endingIndexOfUrl)
    
    return returnArray

def modifyAjaxNumberOfItemsRequested(ajaxAddress):
    #We need to replace any occurrences of the substring "&amp;" 
    #with "&"
    modifiedAjaxAddressV1 = ajaxAddress.replace('&amp;', '&')
    
    #We're looking for the section of the string that looks like this: limit=4
    #And we want to replace it with a larger number, like: limit=150
    modifiedAjaxAddressV2 = modifiedAjaxAddressV1.replace('limit=4', 'limit=150')
    return modifiedAjaxAddressV2

def getAjaxAddressFromFeedAjaxDivHTML(feedAjaxDiv):
    beginningIndexOfAjax = feedAjaxDiv.find('/ajax/feed')
    endingIndexOfAjax = feedAjaxDiv.find('"', beginningIndexOfAjax)
    address = 'http://toolbartv.swagbucks.com/' +  feedAjaxDiv[beginningIndexOfAjax:endingIndexOfAjax]
    return address

def getfeedAjaxDivHTML(htmlString):
    #Find the first character of the Div. It starts with the < character
    beginningIndexOfFeedAjaxDiv = htmlString.find('<div id="feed-ajax-div">')
    
    #Start the cursor just past the opening Div.
    currentIndex = beginningIndexOfFeedAjaxDiv + 3
    #Keep a count of the open Divs. We have found the close of the Feed Ajax Div once openedDivs is reduced to 0.
    unopenedDivs = 1
    while (unopenedDivs >= 1):
        #Find the index of the next occurence of the string "div".
        currentIndex = htmlString.find('div', currentIndex)
        if htmlString[currentIndex - 1] == '<':
            #If this is the opening of a new Div
            unopenedDivs = unopenedDivs + 1
        elif htmlString[currentIndex - 1] == '/':
            #If this is a closing of a Div
            unopenedDivs = unopenedDivs - 1
        
        #If the character just before the "div" string is not "<" or "/", then it is just a random occurence, like in a name or something, so ignore it.
        #Advance the cursor past the current Div
        currentIndex = currentIndex + 3
    
    #Now that we have finished looping, the currentIndex rests on the last closing Div, not including the ">" character.
    endingIndexOfFeedAjaxDiv = currentIndex + 1
    
    #Return the substring
    return htmlString[beginningIndexOfFeedAjaxDiv:endingIndexOfFeedAjaxDiv]

def getHTMLString(url):
    response = httpFunctions.getRequest(url, None, None)
    responseData = response.read()
    return responseData


def tempGetInitialHTML():
    initialHtml = '<!DOCTYPE html><html> <head> <title>Mariah Carey - Fashion Disasters - Swagbucks TV Toolbar</title> <meta http-equiv="X-UA-Compatible" content="requiresActiveX=true"> <link rel="canonical" href="http://toolbartv.swagbucks.com/"> <meta name="keywords" content="sbtvtb Default, StyleEtc, Mariah Carey - Fashion Disasters, Swagbucks TV Toolbar"> <meta name="description" content="Mariah\'s style hasn\'t changed over the years"> <meta property="og:title" content="Mariah Carey - Fashion Disasters - Swagbucks TV Toolbar"> <meta property="og:site_name" content="Swagbucks TV Toolbar"> <meta property="og:url" content="http://toolbartv.swagbucks.com/"> <meta property="og:description" content="Mariah\'s style hasn\'t changed over the years"> <meta property="og:video:type" content="application/x-shockwave-flash"> <meta property="og:image" content="http://pthumbnails.5min.com/5610841/280542045_4_o.jpg"> <meta property="og:video" content=""> <link href="http://toolbartv.swagbucks.com/style.css?1421782783" type="text/css" media="all" rel="stylesheet"><script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script><!--<script type="text/javascript" src="http://www.sbx-cdn.com/js/sbtvM.js?v=17 "></script> --> <script type="text/javascript" src="http://toolbartv.swagbucks.com/js/load/sbtvM?1386365638&raw"></script> </head> <body> <script type="text/javascript" src="http://img.video.swagbucks.com/swagbucks_tv_toolbar/BrightcoveExperience.js"></script><script type="text/javascript" src="http://img.video.swagbucks.com/swagbucks_tv_toolbar/APIModules_all.js"></script><script type="text/javascript">var bcExp;var modVP;var modExp;var modCon; // called when template loads, this function stores a reference to the player and modules. function onTemplateLoaded(experienceID) { bcExp = brightcove.getExperience(experienceID); modVP = bcExp.getModule(APIModules.VIDEO_PLAYER); modExp = bcExp.getModule(APIModules.EXPERIENCE); modCon = bcExp.getModule(APIModules.CONTENT); }</script><script type="text/javascript"> var QueryString = function () { // This function is anonymous, is executed immediately and // the return value is assigned to QueryString! var query_string = {}; var query = window.location.search.substring(1); var vars = query.split("&"); for (var i=0;i<vars.length;i++) { var pair = vars[i].split("="); // If first entry with this name if (typeof query_string[pair[0]] === "undefined") { query_string[pair[0]] = pair[1]; // If second entry with this name } else if (typeof query_string[pair[0]] === "string") { var arr = [ query_string[pair[0]], pair[1] ]; query_string[pair[0]] = arr; // If third or later entry with this name } else { query_string[pair[0]].push(pair[1]); } } return query_string;}(); /*\|*||*| :: cookies.js ::|*||*| A complete cookies reader/writer framework with full unicode support.|*||*| https://developer.mozilla.org/en-US/docs/DOM/document.cookie|*||*| This framework is released under the GNU Public License, version 3 or later.|*| http://www.gnu.org/licenses/gpl-3.0-standalone.html|*||*| Syntaxes:|*||*| * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])|*| * docCookies.getItem(name)|*| * docCookies.removeItem(name[, path])|*| * docCookies.hasItem(name)|*| * docCookies.keys()|*|\*/ var docCookies = { getItem: function (sKey) {return unescape(document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*)|.*"), "$1")) || null; }, setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return false; }var sExpires = "";if (vEnd) { switch (vEnd.constructor) {case Number: sExpires = vEnd === Infinity ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT" : "; max-age=" + vEnd; break;case String: sExpires = "; expires=" + vEnd; break;case Date: sExpires = "; expires=" + vEnd.toGMTString(); break; }}document.cookie = escape(sKey) + "=" + escape(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");return true; }, removeItem: function (sKey, sPath) {if (!sKey || !this.hasItem(sKey)) { return false; }document.cookie = escape(sKey) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + (sPath ? "; path=" + sPath : "");return true; }, hasItem: function (sKey) {return (new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie); }, keys: /* optional method: you can safely remove it! */ function () {var aKeys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/);for (var nIdx = 0; nIdx < aKeys.length; nIdx++) { aKeys[nIdx] = unescape(aKeys[nIdx]); }return aKeys; }}; var qsSourceTag = \'\', qsDefTag = \'\'; if (typeof QueryString.utm_source != \'undefined\') { docCookies.setItem(\'qsSourceTag\', QueryString.utm_source, (60 * 60) ,\'/\'); } if (typeof QueryString.tag != \'undefined\') { docCookies.setItem(\'qsDefTag\', QueryString.tag, (60 * 60) ,\'/\'); } if (docCookies.getItem(\'qsSourceTag\') != null) { qsSourceTag = docCookies.getItem(\'qsSourceTag\'); } if (docCookies.getItem(\'qsDefTag\') != null) { qsDefTag = docCookies.getItem(\'qsDefTag\'); } // Comments selector var showComments = 1; if (typeof QueryString.c != \'undefined\' ) { if (QueryString.c == \'0\') { docCookies.setItem(\'showComments\', 0, (60 * 60) ,\'/\'); } else if (QueryString.c == \'1\') { docCookies.removeItem(\'showComments\', \'/\'); } } if (docCookies.getItem(\'showComments\') != null) {showComments = docCookies.getItem(\'showComments\'); }</script><script type="text/javascript"> // Standard Style selector selector var is_std = 1; if (typeof QueryString.is_std != \'undefined\' ) { if (QueryString.is_std == \'0\') { docCookies.setItem(\'is_std\', 0, (60 * 60) ,\'/\'); } else if (QueryString.is_std == \'1\') { docCookies.removeItem(\'is_std\', \'/\'); } } if (docCookies.getItem(\'is_std\') != null) {is_std = docCookies.getItem(\'is_std\'); } if (is_std == 0) { $(function() { $(\'#logo\').attr(\'href\', \'#\').css(\'cursor\', \'default\'); $(\'.std_hide, .fbshare, #searchForItems, #nav, [rel="facebook"]\').hide(); $(\'head\').append("<meta name=\"viewport\" content=\"width=device-width\">"); $(\'html\').removeAttr(\'id\'); }); } </script> <script type="text/javascript">var sbtvFeedId = "239"; var sbtvVidId = "34057"; var sbtvSite = \'toolbartv\';</script> <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> <script type="text/javascript">/*var checktbData = setInterval(function() {if (typeof tbData != \'undefined\') {if (tbData.showWatchRedesign) { window.location = "http://toolbartv.swagbucks.com/page/load/watch-construction?raw";}clearInterval(checktbData); }}, 250); */</script> <link href="http://www.swagbucks.com/content/skin-02/css/template.css" type="text/css" rel="stylesheet"> <style type="text/css">.stPopVid{width:920px; margin-left:-471px;}.stPopVid .inner{padding:18px}#tvWelcomeCont{text-align:center;}#tvWelcomeCont img{display:block; margin:0 auto 10px;}.tvWelcomeStar{text-indent:-9999px; display:block; position:absolute; top:-28px; left:-6px; background:no-repeat center; height:147px; width:156px; background-image:url(http://www.swagbucks.com/content/skin-02/images/video/star.jpg);}#tvWelcomeCenter{width:796px; margin:18px auto 10px; color:#4F4F4F;}#agreeCont{margin:14px auto; text-align:center;} </style> <div class="stPop stPopVid" id="stPopActive" style="z-index:9999;display:none; width:300px; margin-left:0; cursor:default;margin-top:0; top:20px; left:32px; text-align:center"> <div class="inner"> <h1 class="highlight9">Please help us keep the quality of SBTV high, by confirming that you\'re actively watching our content.</h1> <div style="margin-top:36px; text-align:center"><div id="btnConf" class="btn btn1" style="display:inline-block; padding-left:20px; padding-right:20px">I\'m Still Here</div></div> </div> </div> <div id="tbar-sbAmount" style="display:none"></div> <style> html,body{margin:0; padding:0; width:390px; overflow:hidden} .topNav, #titlesOuterCont, #header .menu{display:none !important} body .contOuter{border:0 none; background-color:transparent; width:390px;} #header{width:676px; margin:0 auto;} #content{width:372px; padding-top:5px; margin-right:5px; float:left} #sidebar1{width:372px; float:none; padding:0; margin:0} #mainContent{margin:0; padding:5px 0 0; float:left; width:300px;} #header{width:372px; padding:42px 9px 8px; background-color:#fff; border:0 none; border-top:0; position:relative; top:0; left:0;} #content{padding:0; margin:0; float:none} #mainContent{ padding:0; float:none; width:372px;} #sbvd_div{top:16px !important; width:376px !important; left:7px !important; margin-left:0 !important;} #tblAwardBannerAA{margin:0 !important; padding: 10px !important;} #sbvd_div .sbDeno{float:none !important; margin:0 0 20px !important;} #sbvd_div .msg{float:none !important;} #claimBtnDv{position: static !important;} #claimBtnDv .btnClaim{margin-top:6px !important;} #sbvd_capText{width:156px !important;} #sbvdValidateMsg{bottom:-10px !important; left:-7px !important;} </style> <script type="text/javascript"> var qsParm = {}; if(window.location.search.length > 1) { var query = window.location.search.substring(1); var parms = query.split(\'&\'); for (var i=0; i<parms.length; i++) { var pos = parms[i].indexOf(\'=\'); if (pos > 0) { var key = parms[i].substring(0,pos); var val = parms[i].substring(pos+1); qsParm[key] = val; } } } function pSetSessionCookie(c_name,value) { var c_value=escape(value); document.cookie=c_name + "=" + c_value + ";path=/;domain=swagbucks.com"; } function pGetCookieValue(c_name) { var i,x,y,ARRcookies=document.cookie.split(";"); for (i=0;i<ARRcookies.length;i++) { x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("=")); y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1); x=x.replace(/^\s+|\s+$/g,""); if (x==c_name) { return unescape(y); } } } var noga = false; function noGa(){ return (noga || typeof pGetCookieValue(\'noga\') != \'undefined\'); } if(qsParm["yg"] != \'undefined\' && qsParm["yg"] == \'1\'){ if(typeof pGetCookieValue(\'noga\') == \'undefined\'){ pSetSessionCookie(\'noga\',\'1\'); } noga = true; } var cacheBuster = \'&_=\' + Math.floor(Math.random() * 100); if( document.cookie.indexOf(\'__urqm\') == -1 || noGa() ) { document.write(\'<script type="text/javascript" src="http://www.sbx-cdn.com/p/toolbar-tv.js?cmd=co-tb-js&wide=1&vid=1&top=true&jsOnly=true\' + cacheBuster + \'"></sc\' + \'ript>\'); } else {var citmid = "34057"; document.write(\'<script type="text/javascript" src="http://www.swagbucks.com/?cmd=co-tb-js&wide=1&vid=1&top=true&jsOnly=true&itemID=\' + citmid + cacheBuster + \'"></sc\' + \'ript>\'); } </script> <style> #meterOverlimit{position:absolute; top:-55px; right:0; display:inline-block; padding:4px; background:#4A4A4A; color:#F9F9F9; border:solid 1px #000; font-weight:bold; font-size:12px; text-align:center; opacity: 0.93; MozOpacity: 0.93; KhtmlOpacity: 0.93;filter: alpha(opacity=93);} #meterOuterCont{position:absolute; top:0; left:9px;} #meterLoggedOut{height:33px; line-height:34px; width:233px; position:relative; top:4px; left:0; float:left; background:url(http://img.video.swagbucks.com/swagbucks_tv_toolbar/default/meter-loggedout.jpg) no-repeat left top; font-weight:bold; font-size:10px; color:#000; text-indent:8px} #meterLoggedOut a{color:#000; text-decoration:underline} #meterLoggedOut a:hover{text-decoration:none} #meterLabel{color:#373737; font-size:14px; font-weight:bold; line-height:42px; float:left; margin-right:3px; width:100px; padding-left:20px} #meterLabel img{cursor:pointer; position:relative; top:-1px; left:0; vertical-align:middle; padding:0 2px;} #meterOuter{height:33px; width:213px; position:relative; top:5px; left:0; float:left;} #meterWrap{position:absolute; top:0; left:0; height:100%; width:100%; z-index:2;} #meterInnerCont{position:absolute; top:0; left:0; z-index:1; background:url(http://img.video.swagbucks.com/swagbucks_tv_toolbar/default/meter-bkd.jpg) repeat left top; height:100%; width:100%} #meterFill{background:url(http://img.video.swagbucks.com/swagbucks_tv_toolbar/default/meter-bkd-fill.jpg) repeat left top; height:100%;} #meterNumber{color:#F9F9F9; font-weight:bold; position:absolute; top:0; left:44%; font-size:14px; line-height:33px} #meterSb{position:absolute; top:0; right:-28px; height:33px; width:38px; z-index:1; background:url(http://img.video.swagbucks.com/swagbucks_tv_toolbar/default/meter-sb.png) repeat left top;} #meterDuplicateVideo { width: 350px; background: #f8a4a6; color: #600207; position: absolute; top: 5px; left: 5px; border: 1px solid rgb(116, 101, 100); font-size: 13px; padding: 5px; z-index: 9997; text-shadow: #b46f70 0px 1px 0px; height: 45px; -moz-border-radius: 4px; -webkit-border-radius: 4px; border-radius: 4px; -moz-box-shadow: #8d8d8d 0px 1px 3px; -webkit-box-shadow: #8d8d8d 0px 1px 3px; box-shadow: #8d8d8d 0px 1px 3px; } #meterDuplicateVideo img{position:absolute;right:10px;bottom:5px;cursor:pointer} </style> <script type="text/javascript"> $(function(){ if(typeof sbMemId == \'undefined\' || !sbMemId || !parseInt(sbMemId)) { $(\'#meterOuter\').css(\'display\', \'none\'); $(\'#meterLoggedOut\').css(\'display\',\'\'); $(\'#meterOuterCont\').css(\'padding-right\',\'0\').fadeIn(\'slow\'); } }); </script> <div id="header"> <div id="meterOverlimit" style="display:none; top:5px; left:5px; z-index:9">You have reached your daily maximum.<br>Come back tomorrow to earn more.</div> <div id="meterDuplicateVideo" style="display:none"> Congratulations, you really like this video. You can continue to watch it but you can only earn credit towards Swag Bucks for one viewing of it per day. <img style="" onclick="$(\'#meterDuplicateVideo\').fadeOut();" src="http://cdn1.swagbucks.com/content/skin-02/images/video/x.png"> </div> <div id="meterOuterCont" style="display:none"> <div id="meterLabel"> SB Meter <a href="http://help.swagbucks.com/forums/21448113-SBTV?tab=tv" target="_blank"><img src="http://www.swagbucks.com/content/skin-02/images/video/meter-help.jpg" border="0"></a> </div> <div id="meterOuter"> <img id="meterWrap" src="http://img.video.swagbucks.com/swagbucks_tv_toolbar/default/meter-wrap.png"> <div id="meterInnerCont"> <div id="meterFill"></div> <span id="meterNumber"></span> </div> <div id="meterSb"></div> </div> <div id="meterLoggedOut" style="display:none"><a href="http://www.swagbucks.com/p/register" onclick="return updateRegLnk(this, true);" target="_blank">Register</a> to start earning Swag Bucks</div> <div class="clear"></div> </div> <script type="text/javascript"> if(noGa()) $(\'#meterOuterCont\').css(\'left\', \'-9000px\'); </script> <style> #menuChans {padding:0; margin:10px 0 4px; height:31px} #menuChans ul{margin:0; padding:0; height:31px} #menuChans ul li{list-style:none outside none; margin:0 1px; padding:0; float:left; width:35px; height:31px; position:relative; top:0; left:0} #menuChans ul li a{display:block; width:27px; height:23px; padding:2px; border:solid 2px #D6D1CB; -moz-border-radius:4px; -webkit-border-radius:4px; border-radius:4px; position:relative; top:0; left:0; z-index:1;} #menuChans ul li a img{border:0 none; height:23px; width:27px; } #menuChans ul li a.selected{border-color:#B4CE6B; position:absolute; top:-4px; left:-5px; z-index:2; width:37px; height:28px; background:#fff} #menuChans ul li a:hover{border-color:#B4CE6B; position:absolute; top:-11px; left:-10px; z-index:3; width:50px; height:36px; background:#fff} #menuChans ul li a.selected img{width:37px; height:28px;} #menuChans ul li a:hover img{width:50px; height:36px;} </style> <div id="menuChans"> <ul><li><a href="http://toolbartv.swagbucks.com/feed/styleetc/239" id="menuFeed239" title="StyleEtc"><img ll-src="http://img.video.swagbucks.com/global/style.jpg" src="http://img.video.swagbucks.com/global/pixel.png"></a></li><li><a href="http://toolbartv.swagbucks.com/feed/moviefone/70" id="menuFeed70" title="moviefone"><img ll-src="http://img.video.swagbucks.com/global/moviefone.jpg" src="http://img.video.swagbucks.com/global/pixel.png"></a></li><li><a href="http://toolbartv.swagbucks.com/feed/reuters/69" id="menuFeed69" title="Reuters"><img ll-src="http://img.video.swagbucks.com/global/reuters.jpg" src="http://img.video.swagbucks.com/global/pixel.png"></a></li><li><a href="http://toolbartv.swagbucks.com/feed/splashnews/291" id="menuFeed291" title="SplashNews"><img ll-src="http://img.video.swagbucks.com/global/splash.jpg" src="http://img.video.swagbucks.com/global/pixel.png"></a></li><li><a href="http://toolbartv.swagbucks.com/feed/tekzilla/292" id="menuFeed292" title="Tekzilla"><img ll-src="http://img.video.swagbucks.com/global/tekzilla.jpg" src="http://img.video.swagbucks.com/global/pixel.png"></a></li><li><a href="http://toolbartv.swagbucks.com/feed/uzoo/279" id="menuFeed279" title="Uzoo"><img ll-src="http://img.video.swagbucks.com/global/zoo.jpg" src="http://img.video.swagbucks.com/global/pixel.png"></a></li></ul> </div> <script type="text/javascript"> var mfID = "239"; $(\'#menuFeed\' + mfID).addClass(\'selected\');</script> <div id="content"> <div id="sidebar1"> <div id="screen_in" class="banner_big" style="z-index:0; min-height:244px; height:246px; padding:0; width:370px; margin-bottom:0; background:#DCEAF3; border:solid 1px #CDCDCD;"><div id="videoPlayerComponent"></div></div> </div> </div> <div id="mainContent" style="position:relative; top:0; left:0; padding-top:135px"> <div id="banner_ad" class="banner_medium" style="position:relative; top:0; left:0; padding:0 ; width: 370px; margin:0; background:#F9F9F9; padding:5px 0; border:solid 1px #CDCDCD"> <!-- required in all themes --> <div id="square"> <div id="medrect"> <div id="banner_ad" class="banner_medium" style="position:relative; top:0; left:0; margin:0"> <div id="video_companion" style="position:relative; top:0; left:0; z-index:4; height:250px; width: 300px; margin:0 auto"><div id="adaptvcompanion" style="position:relative; z-index:1; width:300px;height:250px;"> <div id="adComponent"> </div> </div> </div> </div> </div> </div> <!-- end required in all themes --> </div> <script type="text/javascript">var _gaq = _gaq || [];if(!noGa()){//console.log(\'ga\');_gaq.push([\'_setAccount\', \'UA-2839033-15\']);_gaq.push([\'_setDomainName\', \'.swagbucks.com\']);_gaq.push([\'_trackPageview\']);}_gaq.push([\'b._setAccount\', \'UA-18057857-3\']);_gaq.push([\'b._setDomainName\', \'.swagbucks.com\']);_gaq.push([\'b._trackPageview\']);(function() {var ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;ga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);})(); </script> <div id="realtedCont" style="position:absolute; top:10px; left:0; width: 360px; padding:5px; border:solid 1px #CDCDCD"> <div style="color:#194077; font-size:14px; font-weight:bold;">Related Videos</div> <style> .thumb-container { position:relative; top:0; left:0; padding:0; margin:0 4px; width:76px; height:86px; overflow:hidden; float:left; } .thumb-container .thumb-clip { position:relative; top:0; left:0; z-index:1; height:56px; width:68px; overflow:hidden; border:solid 2px #E0E1DC; -moz-border-radius:4px; -webkit-border-radius:4px; border-radius:4px; text-align:center; margin:2px; } .thumb-container .thumb-clip img { width:64px; height:52px; position:absolute; top:2px; left:2px; } .thumb-container:hover .thumb-clip, .thumb-container.active .thumb-clip { border-color:#B4CE6B } .play-icon { background: url(\'http://www.swagbucks.com/content/skin-02/images/video_btnPlay.png\') center no-repeat; position:absolute; top:0; left:0; bottom:0; right:0; z-index:99; display:none; } .thumb-container.active:hover .play-icon { display:none; } .thumb-container:hover .play-icon { display:block; } .thumb-container .thumb-title{ display:block; padding:0 4px } .thumb-container .thumb-title{ color:#1F4B86; font-size:9px; } .thumb-container.active .thumb-title { color:#000; } .thumb-container.active .thumb-link { display:none; } .thumb-container .fbshare { display:none; } .thumb-container .thumb-link { position:absolute; top:0; left:0; right:0; bottom:0; z-index:200; } #feed-ajax-div .feed-ajax-next { background:url(\'http://www.swagbucks.com/content/skin-02/images/video/btn_next.jpg\') no-repeat center; width:22px; height:51px; text-indent:999px; overflow:hidden; position:absolute; top:50%; margin-top:-25px; right:0; display:block; margin-right:-20px; cursor:pointer; } #feed-ajax-div .feed-ajax-back { background:url(\'http://www.swagbucks.com/content/skin-02/images/video/btn_back.jpg\') no-repeat center; width:22px; height:51px; text-indent:999px; overflow:hidden; position:absolute; top:50%; margin-top:-25px; left:0; display:block; margin-left:-20px; cursor:pointer; } #feed-ajax-div { position:relative; width:336px; margin:0 auto; height:86px; } </style> <div id="feed-ajax-div"><span data-href="/ajax/feed/170/239/34057/?offset=4&amp;limit=4&amp;fbshare=login&amp;description=&amp;enhanced=&amp;img=&amp;" class="feed-ajax-next">Next</span><div class="thumb-container active" data-channel="sbtvtb Default" data-feed="StyleEtc"><div class="thumb-active"></div><div class="thumb-clip"><span class="thumb-padding"></span><div class="play-icon"></div><a class="thumb-img-link" href="http://toolbartv.swagbucks.com/video/mariah-carey---fashion-disasters/239/34057"><img ll-src="http://pthumbnails.5min.com/5610841/280542045_4_o.jpg" src="http://img.video.swagbucks.com/global/pixel.png" title="Mariah Carey - Fashion Disasters" alt="Mariah Carey - Fashion Disasters" class="thumb-feed-styleetc"></a></div><div class="thumb-title">Mariah Carey - Fashion Disasters</div><a href="https://www.facebook.com/dialog/feed?app_id=&amp;link=http://toolbartv.swagbucks.com/video/mariah-carey---fashion-disasters/239/34057&amp;redirect_uri=http://toolbartv.swagbucks.com/video/mariah-carey---fashion-disasters/239/34057" class="fbshare login-required" target="_blank" title="Share \'Mariah Carey - Fashion Disasters\' on Facebook" data-name="Mariah Carey - Fashion Disasters" data-caption="Mariah Carey - Fashion Disasters provided by Swagbucks TV Toolbar" data-description="Mariah\'s style hasn\'t changed over the years" data-link="http://toolbartv.swagbucks.com/video/mariah-carey---fashion-disasters/239/34057" data-picture="http://pthumbnails.5min.com/5610841/280542045_4_o.jpg">Share</a><a class="thumb-link" href="http://toolbartv.swagbucks.com/video/mariah-carey---fashion-disasters/239/34057"></a></div><div class="thumb-container next-item" data-channel="sbtvtb Default" data-feed="StyleEtc"><div class="thumb-active"></div><div class="thumb-clip"><span class="thumb-padding"></span><div class="play-icon"></div><a class="thumb-img-link" href="http://toolbartv.swagbucks.com/video/new-celebrity-trendsetters-on-the-red-carpet/239/33986"><img ll-src="http://pthumbnails.5min.com/9660229/483011408_3_o.jpg" src="http://img.video.swagbucks.com/global/pixel.png" title="New Celebrity Trendsetters on the Red Carpet" alt="New Celebrity Trendsetters on the Red Carpet" class="thumb-feed-styleetc"></a></div><div class="thumb-title">New Celebrity Trendsetters on the Red Carpet</div><a href="https://www.facebook.com/dialog/feed?app_id=&amp;link=http://toolbartv.swagbucks.com/video/new-celebrity-trendsetters-on-the-red-carpet/239/33986&amp;redirect_uri=http://toolbartv.swagbucks.com/video/new-celebrity-trendsetters-on-the-red-carpet/239/33986" class="fbshare login-required" target="_blank" title="Share \'New Celebrity Trendsetters on the Red Carpet\' on Facebook" data-name="New Celebrity Trendsetters on the Red Carpet" data-caption="New Celebrity Trendsetters on the Red Carpet provided by Swagbucks TV Toolbar" data-description="Forget Rihanna and GaGa, there are some new trendsetters to follow." data-link="http://toolbartv.swagbucks.com/video/new-celebrity-trendsetters-on-the-red-carpet/239/33986" data-picture="http://pthumbnails.5min.com/9660229/483011408_3_o.jpg">Share</a><a class="thumb-link" href="http://toolbartv.swagbucks.com/video/new-celebrity-trendsetters-on-the-red-carpet/239/33986"></a></div><div class="thumb-container" data-channel="sbtvtb Default" data-feed="StyleEtc"><div class="thumb-active"></div><div class="thumb-clip"><span class="thumb-padding"></span><div class="play-icon"></div><a class="thumb-img-link" href="http://toolbartv.swagbucks.com/video/a-look-back-at-lingerie/239/33949"><img ll-src="http://pthumbnails.5min.com/10339264/516963177_3_o.jpg" src="http://img.video.swagbucks.com/global/pixel.png" title="A Look back At Lingerie" alt="A Look back At Lingerie" class="thumb-feed-styleetc"></a></div><div class="thumb-title">A Look back At Lingerie</div><a href="https://www.facebook.com/dialog/feed?app_id=&amp;link=http://toolbartv.swagbucks.com/video/a-look-back-at-lingerie/239/33949&amp;redirect_uri=http://toolbartv.swagbucks.com/video/a-look-back-at-lingerie/239/33949" class="fbshare login-required" target="_blank" title="Share \'A Look back At Lingerie\' on Facebook" data-name="A Look back At Lingerie" data-caption="A Look back At Lingerie provided by Swagbucks TV Toolbar" data-description="We take a look at the history of lingerie. " data-link="http://toolbartv.swagbucks.com/video/a-look-back-at-lingerie/239/33949" data-picture="http://pthumbnails.5min.com/10339264/516963177_3_o.jpg">Share</a><a class="thumb-link" href="http://toolbartv.swagbucks.com/video/a-look-back-at-lingerie/239/33949"></a></div><div class="thumb-container lastItem" data-channel="sbtvtb Default" data-feed="StyleEtc"><div class="thumb-active"></div><div class="thumb-clip"><span class="thumb-padding"></span><div class="play-icon"></div><a class="thumb-img-link" href="http://toolbartv.swagbucks.com/video/cannes-red-carpet-style/239/34044"><img ll-src="http://pthumbnails.5min.com/5808085/290404239_1_o.jpg" src="http://img.video.swagbucks.com/global/pixel.png" title="Cannes Red Carpet Style" alt="Cannes Red Carpet Style" class="thumb-feed-styleetc"></a></div><div class="thumb-title">Cannes Red Carpet Style</div><a href="https://www.facebook.com/dialog/feed?app_id=&amp;link=http://toolbartv.swagbucks.com/video/cannes-red-carpet-style/239/34044&amp;redirect_uri=http://toolbartv.swagbucks.com/video/cannes-red-carpet-style/239/34044" class="fbshare login-required" target="_blank" title="Share \'Cannes Red Carpet Style\' on Facebook" data-name="Cannes Red Carpet Style" data-caption="Cannes Red Carpet Style provided by Swagbucks TV Toolbar" data-description="In this video, we look at who is making a mark on the red carpet." data-link="http://toolbartv.swagbucks.com/video/cannes-red-carpet-style/239/34044" data-picture="http://pthumbnails.5min.com/5808085/290404239_1_o.jpg">Share</a><a class="thumb-link" href="http://toolbartv.swagbucks.com/video/cannes-red-carpet-style/239/34044"></a></div><div class="clear"></div></div> </div> </div> </div> <script type="text/javascript">var defaultSort = 1,maxInitComments = 20;var comVidId = "34057";var sbFriendsList = {};</script> <script type="text/javascript"> if(sbMemId == 0){ document.getElementById(\'banner_ad_if\').src = document.getElementById("banner_ad_if").src + \'?promo=1&v=1\'; } </script> <script type="text/javascript" src="http://toolbartv.swagbucks.com/js/load/sbtv_js?1439922028"></script> <script type="text/javascript"> $(function(){ $(\'.thumb-container.active .thumb-title\').html(\'Playing now ..\'); }); $(document).ready(function(){ setTimeout(function() { if ($(\'#medrect\').height() === 0) { _gaq.push([\'_trackEvent\', \'adblock\', \'found\', sbMemId]); } else { _gaq.push([\'_trackEvent\', \'adblock\', \'notfound\']); } }, 1000); }); </script> <script type="text/javascript">var _sf_async_config={uid:13667,domain:"toolbartv.swagbucks.com"};(function(){ function loadChartbeat() { window._sf_endpt=(new Date()).getTime(); var e = document.createElement(\'script\'); e.setAttribute(\'language\', \'javascript\'); e.setAttribute(\'type\', \'text/javascript\'); e.setAttribute(\'src\', (("https:" == document.location.protocol) ? "https://a248.e.akamai.net/chartbeat.download.akamai.com/102508/" : "http://static.chartbeat.com/") + "js/chartbeat.js"); document.body.appendChild(e); } var oldonload = window.onload; window.onload = (typeof window.onload != \'function\') ? loadChartbeat : function() { oldonload(); loadChartbeat(); };})();</script><script type="text/javascript"> var _gaq = _gaq || []; _gaq.push([\'_setAccount\', \'UA-18057857-7\']); _gaq.push([\'_trackPageview\']); _gaq.push([\'_setDomainName\', \'.swagbucks.com\']); (function() { var ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true; ga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\'; var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s); })();</script> <script>if (typeof document.getElementsByTagName(\'title\')[0] == \'undefined\') {title = document.createElement(\'title\');document.getElementsByTagName(\'head\')[0].appendChild(title);}</script><script type=\'text/javascript\' src=\'http://pshared.5min.com/Scripts/PlayerSeed.js?sid=848&width=370&height=246&playList=280542045&autoStart=true&userPlaceHolder=screen_in&cbCustomID=video_companion&hasCompanion=true&playerActions=0&relatedMode=1&shuffle=0&sequential=0&createdByUser=true&onTimeUpdate=checkRedirect&onVideoStartPlay=startPlay&pid=561a197de4b0b30731a15a78\'></script><script type="text/javascript"> loadingComplete(); if (typeof opt_event == \'function\') { opt_event(\'vload\') } if (typeof startCB == \'function\') { startCB(); } var checkRedirect = function(e) {if (e.isPlayComplete){ _gaq.push([\'_trackEvent\', \'nextItem\', \'aol\']); nextItem();} } var startPlay = function() { if (typeof window.parent.postMessage !== \'undefined\') { parent.postMessage("encaction","*"); } }</script> </body></html>'
    return initialHtml

def tempGetHtmlContainingUrls():
    htmlContainingUrls = '<div id="feed-ajax-div"><span data-href="/ajax/feed/170/239/34057/?offset=0&amp;limit=4&amp;fbshare=&amp;description=&amp;enhanced=&amp;img=&amp;" class="feed-ajax-back">Back</span><span data-href="/ajax/feed/170/239/34057/?offset=8&amp;limit=4&amp;fbshare=&amp;description=&amp;enhanced=&amp;img=&amp;" class="feed-ajax-next">Next</span><div class="thumb-container" data-channel="sbtvtb Default" data-feed="StyleEtc"><div class="thumb-active"></div><div class="thumb-clip"><span class="thumb-padding"></span><div class="play-icon"></div><a class="thumb-img-link" href="http://toolbartv.swagbucks.com/video/winter-footwear-trends/239/33990"><img ll-src="http://pthumbnails.5min.com/9482467/474123309_7_o.jpg" src="http://img.video.swagbucks.com/global/pixel.png" title="Winter Footwear Trends" alt="Winter Footwear Trends" class="thumb-feed-styleetc"></a></div><div class="thumb-title">Winter Footwear Trends</div><a class="thumb-link" href="http://toolbartv.swagbucks.com/video/winter-footwear-trends/239/33990"></a></div><div class="thumb-container" data-channel="sbtvtb Default" data-feed="StyleEtc"><div class="thumb-active"></div><div class="thumb-clip"><span class="thumb-padding"></span><div class="play-icon"></div><a class="thumb-img-link" href="http://toolbartv.swagbucks.com/video/the-history-of-the-miniskirt/239/34034"><img ll-src="http://pthumbnails.5min.com/6174008/308700391_7_o.jpg" src="http://img.video.swagbucks.com/global/pixel.png" title="The History of the Miniskirt" alt="The History of the Miniskirt" class="thumb-feed-styleetc"></a></div><div class="thumb-title">The History of the Miniskirt</div><a class="thumb-link" href="http://toolbartv.swagbucks.com/video/the-history-of-the-miniskirt/239/34034"></a></div><div class="thumb-container" data-channel="sbtvtb Default" data-feed="StyleEtc"><div class="thumb-active"></div><div class="thumb-clip"><span class="thumb-padding"></span><div class="play-icon"></div><a class="thumb-img-link" href="http://toolbartv.swagbucks.com/video/pregnant-celebrity-style-trends/239/33979"><img ll-src="http://pthumbnails.5min.com/10000801/500040010_4_o.jpg" src="http://img.video.swagbucks.com/global/pixel.png" title="Pregnant Celebrity Style Trends" alt="Pregnant Celebrity Style Trends" class="thumb-feed-styleetc"></a></div><div class="thumb-title">Pregnant Celebrity Style Trends</div><a class="thumb-link" href="http://toolbartv.swagbucks.com/video/pregnant-celebrity-style-trends/239/33979"></a></div><div class="thumb-container lastItem" data-channel="sbtvtb Default" data-feed="StyleEtc"><div class="thumb-active"></div><div class="thumb-clip"><span class="thumb-padding"></span><div class="play-icon"></div><a class="thumb-img-link" href="http://toolbartv.swagbucks.com/video/hot-new-crops/239/34051"><img ll-src="http://pthumbnails.5min.com/5610913/280545621_5_o.jpg" src="http://img.video.swagbucks.com/global/pixel.png" title="Hot New Crops" alt="Hot New Crops" class="thumb-feed-styleetc"></a></div><div class="thumb-title">Hot New Crops</div><a class="thumb-link" href="http://toolbartv.swagbucks.com/video/hot-new-crops/239/34051"></a></div><div class="clear"></div></div>'
    
    return htmlContainingUrls
